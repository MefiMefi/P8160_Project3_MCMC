---
title: "Report"
author: "Xinran Sun"
date: "5/7/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction

# Dataset
hurrican703.csv collected the track data of 702 hurricanes in  the North Atlantic area from 1950 to 2013. For all the storms, their location (longitude \& latitude) and maximum wind speed were recorded every 6 hours. The data includes the following variables 

1. **ID**:  ID of the hurricans

2. **Season**: In which \textbf{year} the hurricane occurred

3. **Month**: In which \textbf{month} the hurricane occurred 

4. **Nature**:  Nature of the hurricane 
  + ET: Extra Tropical
  + DS: Disturbance
  + NR: Not Rated
  + SS: Sub Tropical
  + TS: Tropical Storm
5. **time**: dates and time of the record  

6. **Latitude** and **Longitude**:  The location of  a hurricane check point 

7. **Wind.kt**  Maximum wind speed (in Knot) at each check point 

From the original dataset, we built a new dataset with contains five more variables, including:

1. **Wind_prev**: wind speed at 6 hours ago

2. **Wind_prev_prev**: wind speed at 12 hours ago

3. **Lat_change**: latitude change compared to 6 hours earlier

4. **Long_change**: longitude change compared to 6 hours earlier

5. **Wind_change**: wind speed change at 6 hours earlier compared to 12 hours earlier

These variables will help us to build the model in the following part.

The $hurricanoutcome2.csv$ recorded the damages and death caused by 46 hurricanes in the U.S, and some features extracted from the hurricane records. The variables include:

1. **ID**: ID of the hurricans
    
2. **Season**: In which \textbf{year} the hurricane occurred 
    
3. **Month**: In which \textbf{month} the hurricane occurred 
    
4. **Nature**: Nature of the hurricane 
    + ET: Extra Tropical
    + DS: Disturbance
    + NR: Not Rated
    + SS: Sub Tropical
    + TS: Tropical Storm
      
5. **Damage**: Financial loss (in Billion U.S. dollars) caused by hurricanes
    
6. **Deaths**: Number of death caused by hurricanes
    
7. **Maxspeed**: Maximum recorded wind speed of the hurricane
    
8. **Meanspeed**: average  wind speed of the hurricane
    
9. **Maxpressure**: Maximum recorded central pressure of the hurricane
    
10. **Meanpressure**: average central pressure of the hurricane
    
11. **Hours**: Duration of the hurricane in hours 
    
12. **Total.Pop**: Total affected population   
    
13. **Percent.Poor**: % affected population that reside in low GDP countres (i.e. GDP per Capita $<=$ 10,000)  
    
14. **Percent.USA**: % affected population that reside in the United States  

## EDA

```{r, include = FALSE}
library(ggplot2)
dt= read.csv("./hurrican703.csv")
library(data.table)
dt <- as.data.table(dt)
summary(dt)

library(tidyverse)
dt_long <- dt %>%
    dplyr::group_by(ID) %>% 
    mutate(Wind_prev = lag(Wind.kt, 1),
           Lat_change = Latitude - lag(Latitude, 1),
           Long_change = Longitude - lag(Longitude, 1),
           Wind_prev_prev = lag(Wind.kt, 2)) %>% 
    mutate(Wind_change = Wind_prev - Wind_prev_prev)
```

We use a bar plot to examine the number of hurricanes in each month. From Figure 1, we can see that September is the month with the most hurricanes, while there are no hurricanes in February and March. Hurricanes in September also have the highest average wind speed as we can see in Figure 2. 

```{r, echo=FALSE, fig1, fig.height=4, fig.width=7}
storms_month_name = distinct(group_by(select(dt_long, Month, ID), Month))

storms_month_name %>% 
  dplyr::group_by(Month) %>% 
  mutate(Month =  factor(Month, levels = month.name)) %>%  
  ggplot(aes(x = Month)) +
  geom_bar()
```
\begin{center}
Figure 1. Count of Hurricanes in Each Month
\end{center}

```{r, echo=FALSE, fig2, fig.height=4, fig.width=7}
dt_long %>% 
  dplyr::group_by(Month) %>% 
  mutate(avg_speed = mean(Wind.kt)) %>% 
  distinct(Month, avg_speed) %>% 
  mutate(Month =  factor(Month, levels = month.name))%>% 
  ggplot(aes(x = Month, y = avg_speed)) +
  geom_point() +
  scale_y_continuous("Average Speed (knot)")
```
\begin{center}
Figure 2. Average Speed (knot) of Hurricanes in Each Month
\end{center}
If we group the hurricanes by years, we can see in general, we have more observations in recently years compared to 50 years ago as shown in Figure 3. However, from Figure 4, the average wind speed seems to have a decreasing trend.

```{r, echo=FALSE, fig3, fig.height=3.8, fig.width=7}
storms_season_name = distinct(group_by(select(dt_long, Season, ID), Season))
ggplot(data = storms_season_name) + 
  geom_bar(aes(x = Season)) +
  scale_x_continuous("Year")
```
\begin{center}
Figure 3. Count of Hurricanes in Each Year
\end{center}
```{r, echo=FALSE, fig4, fig.height=3.8, fig.width=7}
dt_long %>% 
  dplyr::group_by(Season) %>% 
  mutate(avg_speed = mean(Wind.kt)) %>% 
  distinct(Season, avg_speed) %>% 
  ggplot(aes(x = Season, y = avg_speed)) +
  geom_point() +
  geom_smooth(method = "loess") +
  scale_y_continuous("Average Speed (knot)") +
  scale_x_continuous("Year") 
```
\begin{center}
Figure 4. Average Speed (knot) of Hurricanes in Each Year
\end{center}
We also compare the hurricanes with different natures. In our dataset, there are 1214 different nature ratings. This number is larger than the number of hurricanes because some hurricanes are in different natures at different time. From Figure 5, we know that more than half of the natures are in Tropical Storm category. This nature also have the highest average wind speed at about 60 knot, while the disturbance and not rated hurricanes have average wind speed at round 20 knot as Figure 6 illustrates.

```{r, echo=FALSE, fig5, fig.height=3.8, fig.width=7}
storms_nature_name = distinct(group_by(select(dt_long, Nature, ID), Nature))
ggplot(data = storms_nature_name) + 
  geom_bar(aes(x = Nature))
```
\begin{center}
Figure 5. Count of Hurricanes in Each Nature
\end{center}
```{r, echo=FALSE, fig6, fig.height=3.8, fig.width=7}
dt_long %>% 
  dplyr::group_by(Nature) %>% 
  mutate(avg_speed = mean(Wind.kt)) %>% 
  distinct(Nature, avg_speed) %>% 
  ggplot(aes(x = Nature, y = avg_speed)) +
  geom_point() +
  scale_y_continuous("Average Speed (knot)")
```
\begin{center}
Figure 6. Average Speed (knot) of Hurricanes in Each Nature
\end{center}
